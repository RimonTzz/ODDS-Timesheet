<h1>Edit User: <%= @user.email %></h1>

<%= form_with model: @user, url: admin_person_path(@user), method: :patch do |f| %>
  <div class="field">
    <%= f.label :role %>
    <%= f.select :role, @roles, { prompt: "Select Role" } %>
  </div>

  <div>
    <%= f.submit "Update User", class: "btn btn-primary" %>
  </div>
<% end %>

<h2>Projects Assigned to <%= @user.email %></h2>
<ul>
  <% @user_projects.each do |up| %>
    <li>
      <%= up.project.project_name %>
      <%= button_to "Unassign", unassign_project_admin_person_path(@user, project_id: up.project.id), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-sm btn-danger" %>
    </li>
    
  <% end %>
</ul>

<%# <h3>Assign User to Project</h3>
<%= form_with url: assign_project_admin_person_path(@user), method: :post do |f| %>
  <%# <div class="field">
    <%= select_tag :project_id, options_from_collection_for_select(@projects.where.not(id: @user.projects.pluck(:id)), :id, :project_name, prompt: "Select Project") %>
  <%# </div>
  <div>
    <%= submit_tag "Assign Project", class: "btn btn-sm btn-success" %>
  </div>
<%# <% end %> 

<%= link_to "Back to People Management", admin_people_path %>
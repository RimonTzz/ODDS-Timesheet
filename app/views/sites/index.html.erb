<% if notice %>
  <p class="notice"><%= notice %></p>
<% end %>

<% content_for :title, "Sites" %>

<div class="page-container">
  <div class="page-header">
    <h1 class="page-title">Site list</h1>
    <% if current_user.admin? || current_user.super_admin? %>
      <%= link_to "Add site", new_site_path, class: "new-button" %>
    <% end %>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th>Site name</th>
        <th>Location</th>
        <th>Client</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% @sites.each do |site| %>
        <tr>
          <td class="site-name"><%= site.site_name %></td>
          <td class="site-location"><%= site.location %></td>
          <td><%= site.client.client_name %></td>
          <td class="site-actions">
            <%= link_to "ดูรายละเอียด", site, class: "site-action-link" %>
            <% if current_user.admin? %>
              <%= link_to "แก้ไข", edit_site_path(site), class: "site-action-link" %>
              <%= button_to "ลบ", site, method: :delete, class: "site-action-button", form: { data: { turbo_confirm: "คุณแน่ใจหรือไม่ที่จะลบไซต์นี้?" } } %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
